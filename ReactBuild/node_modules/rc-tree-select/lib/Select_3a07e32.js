define("40273e812f963b43f7a7",function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){for(var a=Object.getOwnPropertyNames(t),r=0;r<a.length;r++){var n=a[r],l=Object.getOwnPropertyDescriptor(t,n);l&&l.configurable&&void 0===e[n]&&Object.defineProperty(e,n,l)}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):n(e,t))}function c(){}function p(e,t){return String(D.getPropValue(t,D.labelCompatible(this.props.treeNodeFilterProp))).indexOf(e)>-1}function d(e,t){this[e]=t}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(function(e,a){var r=t+"-"+a,n={title:e.label,value:e.value,key:e.key||e.value||r,disabled:e.disabled||!1,selectable:e.hasOwnProperty("selectable")?e.selectable:!0},l=void 0;return l=e.children&&e.children.length?g["default"].createElement(w["default"],n,h(e.children,r)):g["default"].createElement(w["default"],f({},n,{isLeaf:e.isLeaf}))})}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},v=e("53ab468d896ac9e0f717"),g=r(v),m=e("21bb258da0a791b110a7"),b=r(m),y=e("dc0e74a9bb0bb6feb2d3"),C=r(y),S=e("961a0cfb32e8002c95e8"),N=r(S),V=e("8a67f202859bf19c5b34"),k=r(V),_=e("a6a04bbf387d36cfa021"),T=r(_),D=e("3c143f628e5935a3ba69"),O=e("54109427207918e197d1"),E=r(O),P=e("4290df4fd45b61311d8f"),w=r(P),L=e("9cfabdc4236a07227a35"),I=e("ad5552dfc1320b17807c"),M=function(e){function t(a){i(this,t);var r=s(this,e.call(this,a));A.call(r);var n=[];n=D.toArray("value"in a?a.value:a.defaultValue),r.renderedTreeData=r.renderTreeData(),n=r.addLabelToValue(a,n),n=r.getValue(a,n,a.inputValue?"__strict":!0);var l=a.inputValue||"";return r.saveInputRef=d.bind(r,"inputInstance"),r.state={value:n,inputValue:l,open:a.open||a.defaultOpen,focused:!1},r}return u(t,e),t.prototype.componentDidMount=function(){if(this.state.inputValue){var e=this.getInputDOMNode();e&&e.value&&(e.style.width="",e.style.width=e.scrollWidth+"px")}},t.prototype.componentWillReceiveProps=function(e){if(this.renderedTreeData=this.renderTreeData(e),this._cacheTreeNodesStates="no"!==this._cacheTreeNodesStates&&this._savedValue&&e.value===this._savedValue,(this.props.treeData!==e.treeData||this.props.children!==e.children)&&(this._treeNodesStates=D.getTreeNodesStates(this.renderedTreeData||e.children,this.state.value.map(function(e){return e.value}))),"value"in e){var t=D.toArray(e.value);t=this.addLabelToValue(e,t),t=this.getValue(e,t),this.setState({value:t})}e.inputValue!==this.props.inputValue&&this.setState({inputValue:e.inputValue}),"open"in e&&this.setState({open:e.open})},t.prototype.componentWillUpdate=function(e){this._savedValue&&e.value&&e.value!==this._savedValue&&e.value===this.props.value&&(this._cacheTreeNodesStates=!1,this.getValue(e,this.addLabelToValue(e,D.toArray(e.value))))},t.prototype.componentDidUpdate=function(){var e=this.state,t=this.props;if(e.open&&D.isMultipleOrTags(t)){var a=this.getInputDOMNode();a.value?(a.style.width="",a.style.width=a.scrollWidth+"px"):a.style.width=""}},t.prototype.componentWillUnmount=function(){this.clearDelayTimer(),this.dropdownContainer&&(b["default"].unmountComponentAtNode(this.dropdownContainer),document.body.removeChild(this.dropdownContainer),this.dropdownContainer=null)},t.prototype.getLabelFromNode=function(e){return D.getPropValue(e,this.props.treeNodeLabelProp)},t.prototype.getLabelFromProps=function(e,t){var a=this;if(void 0===t)return null;var r=null;return D.loopAllChildren(this.renderedTreeData||e.children,function(e){D.getValuePropValue(e)===t&&(r=a.getLabelFromNode(e))}),null===r?t:r},t.prototype.getDropdownContainer=function(){return this.dropdownContainer||(this.dropdownContainer=document.createElement("div"),document.body.appendChild(this.dropdownContainer)),this.dropdownContainer},t.prototype.getSearchPlaceholderElement=function(e){var t=this.props,a=void 0;return a=D.isMultipleOrTagsOrCombobox(t)?t.placeholder||t.searchPlaceholder:t.searchPlaceholder,a?g["default"].createElement("span",{style:{display:e?"none":"block"},onClick:this.onPlaceholderClick,className:t.prefixCls+"-search__field__placeholder"},a):null},t.prototype.getInputElement=function(){var e=this.props;return g["default"].createElement("span",{className:e.prefixCls+"-search__field__wrap"},g["default"].createElement("input",{ref:this.saveInputRef,onChange:this.onInputChange,onKeyDown:this.onInputKeyDown,value:this.state.inputValue,disabled:e.disabled,className:e.prefixCls+"-search__field",role:"textbox"}),D.isMultipleOrTags(e)?null:this.getSearchPlaceholderElement(!!this.state.inputValue))},t.prototype.getInputDOMNode=function(){return this.inputInstance},t.prototype.getPopupDOMNode=function(){return this.refs.trigger.getPopupDOMNode()},t.prototype.getPopupComponentRefs=function(){return this.refs.trigger.getPopupEleRefs()},t.prototype.getValue=function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!0,n=t,l="__strict"===r||r&&(this.state&&this.state.inputValue||this.props.inputValue!==e.inputValue);if(e.treeCheckable&&(e.treeCheckStrictly||l)&&(this.halfCheckedValues=[],n=[],t.forEach(function(e){e.halfChecked?a.halfCheckedValues.push(e):n.push(e)})),!e.treeCheckable||e.treeCheckable&&(e.treeCheckStrictly||l))return n;var o=void 0;this._cachetreeData&&this._cacheTreeNodesStates&&this._checkedNodes&&this.state&&!this.state.inputValue?this.checkedTreeNodes=o=this._checkedNodes:(this._treeNodesStates=D.getTreeNodesStates(this.renderedTreeData||e.children,n.map(function(e){return e.value})),this.checkedTreeNodes=o=this._treeNodesStates.checkedNodes);var i=function(t){return t.map(function(t){return{value:D.getValuePropValue(t.node),label:D.getPropValue(t.node,e.treeNodeLabelProp)}})},s=this.props,u=[];if(s.showCheckedStrategy===L.SHOW_ALL)u=i(o);else if(s.showCheckedStrategy===L.SHOW_PARENT){var c=D.filterParentPosition(o.map(function(e){return e.pos}));u=i(o.filter(function(e){return-1!==c.indexOf(e.pos)}))}else u=i(o.filter(function(e){return!e.node.props.children}));return u},t.prototype.getCheckedNodes=function(e,t){var a=e.checkedNodes;if(t.treeCheckStrictly||this.state.inputValue)return a;var r=e.checkedNodesPositions;if(t.showCheckedStrategy===L.SHOW_ALL)a=a;else if(t.showCheckedStrategy===L.SHOW_PARENT){var n=D.filterParentPosition(r.map(function(e){return e.pos}));a=r.filter(function(e){return-1!==n.indexOf(e.pos)}).map(function(e){return e.node})}else a=a.filter(function(e){return!e.props.children});return a},t.prototype.getDeselectedValue=function(e){var t=this.checkedTreeNodes,a=void 0;t.forEach(function(t){t.node.props.value===e&&(a=t.pos)});var r=a.split("-"),n=[],l=[];t.forEach(function(e){var t=e.pos.split("-");e.pos===a||r.length>t.length&&D.isInclude(t,r)||r.length<t.length&&D.isInclude(r,t)||(l.push(e),n.push(e.node.props.value))}),this.checkedTreeNodes=this._checkedNodes=l;var o=this.state.value.filter(function(e){return-1!==n.indexOf(e.value)});this.fireChange(o,{triggerValue:e,clear:!0})},t.prototype.setOpenState=function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;this.clearDelayTimer();var n=this.props,l=this.refs;this.props.onDropdownVisibleChange(e,{documentClickClose:r})&&this.setState({open:e},function(){if(t||e)if(e||D.isMultipleOrTagsOrCombobox(n)){var r=a.getInputDOMNode();r&&document.activeElement!==r&&r.focus()}else l.selection&&l.selection.focus()})},t.prototype.addLabelToValue=function(e,t){var a=this,r=t;return this.isLabelInValue()?r.forEach(function(t,n){return"[object Object]"!==Object.prototype.toString.call(r[n])?void(r[n]={value:"",label:""}):void(t.label=t.label||a.getLabelFromProps(e,t.value))}):r=r.map(function(t){return{value:t,label:a.getLabelFromProps(e,t)}}),r},t.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},t.prototype.removeSelected=function(e){var t=this.props;if(!t.disabled){if(this._cacheTreeNodesStates="no",t.treeCheckable&&(t.showCheckedStrategy===L.SHOW_ALL||t.showCheckedStrategy===L.SHOW_PARENT)&&!t.treeCheckStrictly&&!this.state.inputValue)return void this.getDeselectedValue(e);var a=void 0,r=this.state.value.filter(function(t){return t.value===e&&(a=t.label),t.value!==e}),n=D.isMultipleOrTags(t);if(n){var l=e;this.isLabelInValue()&&(l={value:e,label:a}),t.onDeselect(l)}t.treeCheckable&&this.checkedTreeNodes&&this.checkedTreeNodes.length&&(this.checkedTreeNodes=this._checkedNodes=this.checkedTreeNodes.filter(function(e){return r.some(function(t){return t.value===e.node.props.value})})),this.fireChange(r,{triggerValue:e,clear:!0})}},t.prototype.openIfHasChildren=function(){var e=this.props;(g["default"].Children.count(e.children)||D.isSingleMode(e))&&this.setOpenState(!0)},t.prototype.fireChange=function(e,t){var a=this.props,r=e.map(function(e){return e.value}),n=this.state.value.map(function(e){return e.value});if(r.length!==n.length||!r.every(function(e,t){return n[t]===e})){var l={preValue:[].concat(o(this.state.value))};t&&k["default"](l,t);var i=null,s=e;if(this.isLabelInValue()?this.halfCheckedValues&&this.halfCheckedValues.length&&this.halfCheckedValues.forEach(function(e){s.some(function(t){return t.value===e.value})||s.push(e)}):(i=e.map(function(e){return e.label}),s=s.map(function(e){return e.value})),a.treeCheckable&&l.clear){var u=this.renderedTreeData||a.children;l.allCheckedNodes=D.flatToHierarchy(D.filterAllCheckedData(r,u))}if(a.treeCheckable&&this.state.inputValue){var c=[].concat(o(this.state.value));if(l.checked)e.forEach(function(e){c.every(function(t){return t.value!==e.value})&&c.push(f({},e))});else{var p=void 0,d=c.some(function(e,t){return e.value===l.triggerValue?(p=t,!0):void 0});d&&c.splice(p,1)}s=c,this.isLabelInValue()||(i=c.map(function(e){return e.label}),s=c.map(function(e){return e.value}))}this._savedValue=D.isMultipleOrTags(a)?s:s[0],a.onChange(this._savedValue,i,l),"value"in a||(this._cacheTreeNodesStates=!1,this.setState({value:this.getValue(a,D.toArray(this._savedValue).map(function(e,t){return{value:e,label:i[t]}}))}))}},t.prototype.isLabelInValue=function(){var e=this.props,t=e.treeCheckable,a=e.treeCheckStrictly,r=e.labelInValue;return t&&a?!0:r||!1},t.prototype.renderTopControlNode=function(){var e=this,t=this.state.value,a=this.props,r=a.choiceTransitionName,n=a.prefixCls,l=a.maxTagTextLength;if(D.isSingleMode(a)){var o=g["default"].createElement("span",{key:"placeholder",className:n+"-selection__placeholder"},a.placeholder);return t.length&&(o=g["default"].createElement("span",{key:"value",title:t[0].label,className:n+"-selection-selected-value"},t[0].label)),g["default"].createElement("span",{className:n+"-selection__rendered"},o)}var i=[];D.isMultipleOrTags(a)&&(i=t.map(function(t){var a=t.label,r=a;return l&&"string"==typeof a&&a.length>l&&(a=a.slice(0,l)+"..."),g["default"].createElement("li",f({style:D.UNSELECTABLE_STYLE},D.UNSELECTABLE_ATTRIBUTE,{onMouseDown:D.preventDefaultEvent,className:n+"-selection__choice",key:t.value,title:r}),g["default"].createElement("span",{className:n+"-selection__choice__remove",onClick:e.removeSelected.bind(e,t.value)}),g["default"].createElement("span",{className:n+"-selection__choice__content"},a))})),i.push(g["default"].createElement("li",{className:n+"-search "+n+"-search--inline",key:"__input"},this.getInputElement()));var s=n+"-selection__rendered";return D.isMultipleOrTags(a)&&r?g["default"].createElement(T["default"],{className:s,component:"ul",transitionName:r},i):g["default"].createElement("ul",{className:s},i)},t.prototype.renderTreeData=function(e){var t=e||this.props;if(t.treeData){if(e&&e.treeData===this.props.treeData&&this.renderedTreeData)return this._cachetreeData=!0,this.renderedTreeData;this._cachetreeData=!1;var a=[].concat(o(t.treeData));if(t.treeDataSimpleMode){var r={id:"id",pId:"pId",rootPId:null};"[object Object]"===Object.prototype.toString.call(t.treeDataSimpleMode)&&k["default"](r,t.treeDataSimpleMode),a=D.processSimpleTreeData(a,r)}return h(a)}},t.prototype.render=function(){var e,t=this.props,a=D.isMultipleOrTags(t),r=this.state,n=t.className,o=t.disabled,i=t.allowClear,s=t.prefixCls,u=this.renderTopControlNode(),c={};D.isMultipleOrTagsOrCombobox(t)||(c={onKeyDown:this.onKeyDown,tabIndex:0});var p=(e={},l(e,n,!!n),l(e,s,1),l(e,s+"-open",r.open),l(e,s+"-focused",r.open||r.focused),l(e,s+"-disabled",o),l(e,s+"-enabled",!o),e),d=g["default"].createElement("span",{key:"clear",className:s+"-selection__clear",onClick:this.onClearSelection});return g["default"].createElement(E["default"],f({},t,{treeNodes:t.children,treeData:this.renderedTreeData,_cachetreeData:this._cachetreeData,_treeNodesStates:this._treeNodesStates,halfCheckedValues:this.halfCheckedValues,multiple:a,disabled:o,visible:r.open,inputValue:r.inputValue,inputElement:this.getInputElement(),value:r.value,onDropdownVisibleChange:this.onDropdownVisibleChange,getPopupContainer:t.getPopupContainer,onSelect:this.onSelect,ref:"trigger"}),g["default"].createElement("span",{style:t.style,onClick:t.onClick,className:N["default"](p)},g["default"].createElement("span",f({ref:"selection",key:"selection",className:s+"-selection\n            "+s+"-selection--"+(a?"multiple":"single"),role:"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":r.open},c),u,i&&!a&&this.state.value.length&&this.state.value[0].value?d:null,a||!t.showArrow?null:g["default"].createElement("span",{key:"arrow",className:s+"-arrow",style:{outline:"none"}},g["default"].createElement("b",null)),a?this.getSearchPlaceholderElement(!!this.state.inputValue||this.state.value.length):null)))},t}(v.Component);M.propTypes=I.SelectPropTypes,M.defaultProps={prefixCls:"rc-tree-select",filterTreeNode:p,showSearch:!0,allowClear:!1,placeholder:"",searchPlaceholder:"",labelInValue:!1,inputValue:"",onClick:c,onChange:c,onSelect:c,onDeselect:c,onSearch:c,showArrow:!0,dropdownMatchSelectWidth:!0,dropdownStyle:{},onDropdownVisibleChange:function(){return!0},notFoundContent:"Not Found",showCheckedStrategy:L.SHOW_CHILD,treeCheckStrictly:!1,treeIcon:!1,treeLine:!1,treeDataSimpleMode:!1,treeDefaultExpandAll:!1,treeCheckable:!1,treeNodeFilterProp:"value",treeNodeLabelProp:"title"};var A=function(){var e=this;this.onInputChange=function(t){var a=t.target.value,r=e.props;e.setState({inputValue:a,open:!0}),r.treeCheckable&&!a&&e.setState({value:e.getValue(r,[].concat(o(e.state.value)),!1)}),r.onSearch(a)},this.onDropdownVisibleChange=function(t){!t&&document.activeElement===e.getInputDOMNode(),setTimeout(function(){e.setOpenState(t,void 0,!t)},10)},this.onKeyDown=function(t){var a=e.props;if(!a.disabled){var r=t.keyCode;e.state.open&&!e.getInputDOMNode()?e.onInputKeyDown(t):(r===C["default"].ENTER||r===C["default"].DOWN)&&(e.setOpenState(!0),t.preventDefault())}},this.onInputKeyDown=function(t){var a=e.props;if(!a.disabled){var r=e.state,n=t.keyCode;if(!D.isMultipleOrTags(a)||t.target.value||n!==C["default"].BACKSPACE){if(n===C["default"].DOWN){if(!r.open)return e.openIfHasChildren(),t.preventDefault(),void t.stopPropagation()}else if(n===C["default"].ESC)return void(r.open&&(e.setOpenState(!1),t.preventDefault(),t.stopPropagation()))}else{var l=r.value.concat();if(l.length){var o=l.pop();e.removeSelected(e.isLabelInValue()?o:o.value)}}}},this.onSelect=function(t,a){if(a.selected===!1)return void e.onDeselect(a);var r=a.node,n=e.state.value,l=e.props,o=D.getValuePropValue(r),i=e.getLabelFromNode(r),s=o;e.isLabelInValue()&&(s={value:s,label:i}),l.onSelect(s,r,a);var u="check"===a.event;if(D.isMultipleOrTags(l))if(u)n=e.getCheckedNodes(a,l).map(function(t){return{value:D.getValuePropValue(t),label:e.getLabelFromNode(t)}});else{if(n.some(function(e){return e.value===o}))return;n=n.concat([{value:o,label:i}])}else{if(n.length&&n[0].value===o)return void e.setOpenState(!1);n=[{value:o,label:i}],e.setOpenState(!1)}var c={triggerValue:o,triggerNode:r};if(u){c.checked=a.checked,c.allCheckedNodes=l.treeCheckStrictly||e.state.inputValue?a.checkedNodes:D.flatToHierarchy(a.checkedNodesPositions),e._checkedNodes=a.checkedNodesPositions;var p=e.refs.trigger.popupEle;e._treeNodesStates=p.checkKeys}else c.selected=a.selected;e.fireChange(n,c),null===l.inputValue&&e.setState({inputValue:""})},this.onDeselect=function(t){e.removeSelected(D.getValuePropValue(t.node)),D.isMultipleOrTags(e.props)||e.setOpenState(!1),null===e.props.inputValue&&e.setState({inputValue:""})},this.onPlaceholderClick=function(){e.getInputDOMNode().focus()},this.onClearSelection=function(t){var a=e.props,r=e.state;a.disabled||(t.stopPropagation(),(r.inputValue||r.value.length)&&(e.fireChange([]),e.setOpenState(!1),null===a.inputValue&&e.setState({inputValue:""})))}};M.SHOW_ALL=L.SHOW_ALL,M.SHOW_PARENT=L.SHOW_PARENT,M.SHOW_CHILD=L.SHOW_CHILD,t["default"]=M,a.exports=t["default"]});