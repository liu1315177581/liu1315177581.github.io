define("9d8e8fc83e9c87f27716",function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(){}function a(e,t){return String(w.getPropValue(t,this.props.optionFilterProp)).indexOf(e)>-1}function l(e,t){this[e]=t}function s(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];for(var o=0;o<t.length;o++)t[o]&&"function"==typeof t[o]&&t[o].apply(this,n)}}Object.defineProperty(t,"__esModule",{value:!0});var r=e("d91881461446e4b10db9"),u=i(r),p=e("c75ffe0048d039d6b26f"),c=i(p),d=e("53ab468d896ac9e0f717"),h=i(d),f=e("21bb258da0a791b110a7"),m=i(f),v=e("6fa4cf8090f15a8c9372"),g=i(v),b=e("dc0e74a9bb0bb6feb2d3"),y=i(b),C=e("961a0cfb32e8002c95e8"),T=i(C),S=e("a6a04bbf387d36cfa021"),O=i(S),E=e("eb1c3ee971538afa6ff7"),V=i(E),w=e("a510ae8a60eefc07317d"),M=e("7257fa48fc8e7a775f0f"),N=i(M),k=e("354b3418033c592ae383"),_=i(k),I=e("c9e7ac734d6528b2b488"),L=g["default"]({propTypes:I.SelectPropTypes,mixins:[_["default"]],getDefaultProps:function(){return{prefixCls:"rc-select",filterOption:a,defaultOpen:!1,labelInValue:!1,defaultActiveFirstOption:!0,showSearch:!0,allowClear:!1,placeholder:"",onChange:o,onFocus:o,onBlur:o,onSelect:o,onSearch:o,onDeselect:o,showArrow:!0,dropdownMatchSelectWidth:!0,dropdownStyle:{},dropdownMenuStyle:{},optionFilterProp:"value",optionLabelProp:"value",notFoundContent:"Not Found"}},getInitialState:function(){var e=this.props,t=[];t=w.toArray("value"in e?e.value:e.defaultValue),t=this.addLabelToValue(e,t),t=this.addTitleToValue(e,t);var n="";e.combobox&&(n=t.length?this.getLabelFromProps(e,t[0].key):""),this.saveInputRef=l.bind(this,"inputInstance"),this.saveInputMirrorRef=l.bind(this,"inputMirrorInstance");var i=e.open;return void 0===i&&(i=e.defaultOpen),{value:t,inputValue:n,open:i}},componentWillMount:function(){this.adjustOpenState()},componentWillReceiveProps:function(e){if("value"in e){var t=w.toArray(e.value);t=this.addLabelToValue(e,t),t=this.addTitleToValue(e,t),this.setState({value:t}),e.combobox&&this.setState({inputValue:t.length?this.getLabelFromProps(e,t[0].key):""})}},componentWillUpdate:function(e,t){this.props=e,this.state=t,this.adjustOpenState()},componentDidUpdate:function(){if(w.isMultipleOrTags(this.props)){var e=this.getInputDOMNode(),t=this.getInputMirrorDOMNode();e.value?(e.style.width="",e.style.width=t.clientWidth+"px"):e.style.width=""}},componentWillUnmount:function(){this.clearFocusTime(),this.clearBlurTime(),this.clearAdjustTimer(),this.dropdownContainer&&(m["default"].unmountComponentAtNode(this.dropdownContainer),document.body.removeChild(this.dropdownContainer),this.dropdownContainer=null)},onInputChange:function(e){var t=this.props.tokenSeparators,n=e.target.value;if(w.isMultipleOrTags(this.props)&&t&&w.includesSeparators(n,t)){var i=this.tokenize(n);return this.fireChange(i),this.setOpenState(!1,!0),void this.setInputValue("",!1)}this.setInputValue(n),this.setState({open:!0}),w.isCombobox(this.props)&&this.fireChange([{key:n}])},onDropdownVisibleChange:function(e){e&&!this._focused&&(this.clearBlurTime(),this.timeoutFocus(),this._focused=!0,this.updateFocusClassName()),this.setOpenState(e)},onKeyDown:function(e){var t=this.props;if(!t.disabled){var n=e.keyCode;this.state.open&&!this.getInputDOMNode()?this.onInputKeyDown(e):(n===y["default"].ENTER||n===y["default"].DOWN)&&(this.setOpenState(!0),e.preventDefault())}},onInputKeyDown:function(e){var t=this.props;if(!t.disabled){var n=this.state,i=e.keyCode;if(w.isMultipleOrTags(t)&&!e.target.value&&i===y["default"].BACKSPACE){e.preventDefault();var o=n.value;return void(o.length&&this.removeSelected(o[o.length-1].key))}if(i===y["default"].DOWN){if(!n.open)return this.openIfHasChildren(),e.preventDefault(),void e.stopPropagation()}else if(i===y["default"].ESC)return void(n.open&&(this.setOpenState(!1),e.preventDefault(),e.stopPropagation()));if(n.open){var a=this.refs.trigger.getInnerMenu();a&&a.onKeyDown(e)&&(e.preventDefault(),e.stopPropagation())}}},onMenuSelect:function(e){var t=this,n=e.item,i=this.state.value,o=this.props,a=w.getValuePropValue(n),l=this.getLabelFromOption(n),s=a;o.labelInValue&&(s={key:s,label:l}),o.onSelect(s,n);var r=n.props.title;if(w.isMultipleOrTags(o)){if(-1!==w.findIndexInValueByKey(i,a))return;i=i.concat([{key:a,label:l,title:r}])}else{if(w.isCombobox(o)&&(this.skipAdjustOpen=!0,this.clearAdjustTimer(),this.skipAdjustOpenTimer=setTimeout(function(){t.skipAdjustOpen=!1},0)),i.length&&i[0].key===a)return void this.setOpenState(!1,!0);i=[{key:a,label:l,title:r}],this.setOpenState(!1,!0)}this.fireChange(i);var u=void 0;u=w.isCombobox(o)?w.getPropValue(n,o.optionLabelProp):"",this.setInputValue(u,!1)},onMenuDeselect:function(e){var t=e.item,n=e.domEvent;"click"===n.type&&this.removeSelected(w.getValuePropValue(t)),this.setInputValue("",!1)},onArrowClick:function(e){e.stopPropagation(),this.props.disabled||this.setOpenState(!this.state.open,!this.state.open)},onPlaceholderClick:function(){this.getInputDOMNode()&&this.getInputDOMNode().focus()},onOuterFocus:function(e){this.clearBlurTime(),(w.isMultipleOrTagsOrCombobox(this.props)||e.target!==this.getInputDOMNode())&&(this._focused||(this._focused=!0,this.updateFocusClassName(),this.timeoutFocus()))},onPopupFocus:function(){this.maybeFocus(!0,!0)},onOuterBlur:function(){var e=this;this.blurTimer=setTimeout(function(){e._focused=!1,e.updateFocusClassName();var t=e.props,n=e.state.value,i=e.state.inputValue;if(w.isSingleMode(t)&&t.showSearch&&i&&t.defaultActiveFirstOption){var o=e._options||[];if(o.length){var a=w.findFirstMenuItem(o);a&&(n=[{key:a.key,label:e.getLabelFromOption(a)}],e.fireChange(n))}}else w.isMultipleOrTags(t)&&i&&(e.state.inputValue=e.getInputDOMNode().value="");t.onBlur(e.getVLForOnChange(n))},10)},onClearSelection:function(e){var t=this.props,n=this.state;if(!t.disabled){var i=n.inputValue,o=n.value;e.stopPropagation(),(i||o.length)&&(o.length&&this.fireChange([]),this.setOpenState(!1,!0),i&&this.setInputValue(""))}},onChoiceAnimationLeave:function(){this.refs.trigger.refs.trigger.forcePopupAlign()},getLabelBySingleValue:function(e,t){var n=this;if(void 0===t)return null;var i=null;return h["default"].Children.forEach(e,function(e){if(e.type.isSelectOptGroup){var o=n.getLabelBySingleValue(e.props.children,t);null!==o&&(i=o)}else w.getValuePropValue(e)===t&&(i=n.getLabelFromOption(e))}),i},getValueByLabel:function(e,t){var n=this;if(void 0===t)return null;var i=null;return h["default"].Children.forEach(e,function(e){if(e.type.isSelectOptGroup){var o=n.getValueByLabel(e.props.children,t);null!==o&&(i=o)}else w.toArray(n.getLabelFromOption(e)).join("")===t&&(i=w.getValuePropValue(e))}),i},getLabelFromOption:function(e){return w.getPropValue(e,this.props.optionLabelProp)},getLabelFromProps:function(e,t){return this.getLabelByValue(e.children,t)},getVLForOnChange:function(e){var t=e;return void 0!==t?(t=t.map(this.props.labelInValue?function(e){return{key:e.key,label:e.label}}:function(e){return e.key}),w.isMultipleOrTags(this.props)?t:t[0]):t},getLabelByValue:function(e,t){var n=this.getLabelBySingleValue(e,t);return null===n?t:n},getDropdownContainer:function(){return this.dropdownContainer||(this.dropdownContainer=document.createElement("div"),document.body.appendChild(this.dropdownContainer)),this.dropdownContainer},getPlaceholderElement:function(){var e=this.props,t=this.state,n=!1;t.inputValue&&(n=!0),t.value.length&&(n=!0),w.isCombobox(e)&&1===t.value.length&&!t.value[0].key&&(n=!1);var i=e.placeholder;return i?h["default"].createElement("div",c["default"]({onMouseDown:w.preventDefaultEvent,style:c["default"]({display:n?"none":"block"},w.UNSELECTABLE_STYLE)},w.UNSELECTABLE_ATTRIBUTE,{onClick:this.onPlaceholderClick,className:e.prefixCls+"-selection__placeholder"}),i):null},getInputElement:function(){var e=this.props,t=e.getInputElement?e.getInputElement():h["default"].createElement("input",null),n=T["default"](t.props.className,u["default"]({},e.prefixCls+"-search__field",!0));return h["default"].createElement("div",{className:e.prefixCls+"-search__field__wrap"},h["default"].cloneElement(t,{ref:this.saveInputRef,onChange:this.onInputChange,onKeyDown:s(this.onInputKeyDown,t.props.onKeyDown),value:this.state.inputValue,disabled:e.disabled,className:n}),h["default"].createElement("span",{ref:this.saveInputMirrorRef,className:e.prefixCls+"-search__field__mirror"},this.state.inputValue,"Â "))},getInputDOMNode:function(){return this.topCtrlNode?this.topCtrlNode.querySelector("input,textarea,div[contentEditable]"):this.inputInstance},getInputMirrorDOMNode:function(){return this.inputMirrorInstance},getPopupDOMNode:function(){return this.refs.trigger.getPopupDOMNode()},getPopupMenuComponent:function(){return this.refs.trigger.getInnerMenu()},setOpenState:function(e,t){var n=this,i=this.props,o=this.state;if(o.open===e)return void this.maybeFocus(e,t);var a={open:e};!e&&w.isSingleMode(i)&&i.showSearch&&this.setInputValue(""),e||this.maybeFocus(e,t),this.setState(a,function(){e&&n.maybeFocus(e,t)})},setInputValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0;e!==this.state.inputValue&&(this.setState({inputValue:e}),t&&this.props.onSearch(e))},timeoutFocus:function(){var e=this;this.focusTimer&&this.clearFocusTime(),this.focusTimer=setTimeout(function(){e.props.onFocus()},10)},clearFocusTime:function(){this.focusTimer&&(clearTimeout(this.focusTimer),this.focusTimer=null)},clearBlurTime:function(){this.blurTimer&&(clearTimeout(this.blurTimer),this.blurTimer=null)},clearAdjustTimer:function(){this.skipAdjustOpenTimer&&(clearTimeout(this.skipAdjustOpenTimer),this.skipAdjustOpenTimer=null)},updateFocusClassName:function(){var e=this.refs,t=this.props;this._focused?V["default"](e.root).add(t.prefixCls+"-focused"):V["default"](e.root).remove(t.prefixCls+"-focused")},maybeFocus:function(e,t){if(t||e){var n=this.getInputDOMNode(),i=document,o=i.activeElement;if(n&&(e||w.isMultipleOrTagsOrCombobox(this.props)))o!==n&&(n.focus(),this._focused=!0);else{var a=this.refs.selection;o!==a&&(a.focus(),this._focused=!0)}}},addLabelToValue:function(e,t){var n=this,i=t;return e.labelInValue?i.forEach(function(t){t.label=t.label||n.getLabelFromProps(e,t.key)}):i=i.map(function(t){return{key:t,label:n.getLabelFromProps(e,t)}}),i},addTitleToValue:function(e,t){var n=this,i=t,o=t.map(function(e){return e.key});return h["default"].Children.forEach(e.children,function(e){if(e.type.isSelectOptGroup)i=n.addTitleToValue(e.props,i);else{var t=w.getValuePropValue(e),a=o.indexOf(t);a>-1&&(i[a].title=e.props.title)}}),i},removeSelected:function(e){var t=this.props;if(!t.disabled&&!this.isChildDisabled(e)){var n=void 0,i=this.state.value.filter(function(t){return t.key===e&&(n=t.label),t.key!==e}),o=w.isMultipleOrTags(t);if(o){var a=e;t.labelInValue&&(a={key:e,label:n}),t.onDeselect(a)}this.fireChange(i)}},openIfHasChildren:function(){var e=this.props;(h["default"].Children.count(e.children)||w.isSingleMode(e))&&this.setOpenState(!0)},fireChange:function(e){var t=this.props;"value"in t||this.setState({value:e}),t.onChange(this.getVLForOnChange(e))},isChildDisabled:function(e){return w.toArray(this.props.children).some(function(t){var n=w.getValuePropValue(t);return n===e&&t.props&&t.props.disabled})},tokenize:function(e){var t=this,n=this.props,i=n.multiple,o=n.tokenSeparators,a=n.children,l=this.state.value;return w.splitBySeparators(e,o).forEach(function(e){var n={key:e,label:e};if(-1===w.findIndexInValueByLabel(l,e))if(i){var o=t.getValueByLabel(a,e);o&&(n.key=o,l=l.concat(n))}else l=l.concat(n)}),l},adjustOpenState:function(){if(!this.skipAdjustOpen){var e=this.state.open;"undefined"!=typeof document&&this.getInputDOMNode()&&document.activeElement===this.getInputDOMNode()&&(e=!0);var t=[];e&&(t=this.renderFilterOptions()),this._options=t,(w.isMultipleOrTagsOrCombobox(this.props)||!this.props.showSearch)&&e&&!t.length&&(e=!1),this.state.open=e}},renderTopControlNode:function(){var e=this,t=this.state,n=t.value,i=t.open,o=t.inputValue,a=this.props,l=a.choiceTransitionName,s=a.prefixCls,r=a.maxTagTextLength,u=a.showSearch,p=s+"-selection__rendered",d=null;if(w.isSingleMode(a)){var f=null;if(n.length){var m=!1,v=1;u&&i?(m=!o,m&&(v=.4)):m=!0;var g=n[0];f=h["default"].createElement("div",{key:"value",className:s+"-selection-selected-value",title:g.title||g.label,style:{display:m?"block":"none",opacity:v}},n[0].label)}d=u?[f,h["default"].createElement("div",{className:s+"-search "+s+"-search--inline",key:"input",style:{display:i?"block":"none"}},this.getInputElement())]:[f]}else{var b=[];w.isMultipleOrTags(a)&&(b=n.map(function(t){var n=t.label,i=t.title||n;r&&"string"==typeof n&&n.length>r&&(n=n.slice(0,r)+"...");var o=e.isChildDisabled(t.key),a=o?s+"-selection__choice "+s+"-selection__choice__disabled":s+"-selection__choice";return h["default"].createElement("li",c["default"]({style:w.UNSELECTABLE_STYLE},w.UNSELECTABLE_ATTRIBUTE,{onMouseDown:w.preventDefaultEvent,className:a,key:t.key,title:i}),h["default"].createElement("div",{className:s+"-selection__choice__content"},n),o?null:h["default"].createElement("span",{className:s+"-selection__choice__remove",onClick:e.removeSelected.bind(e,t.key)}))})),b.push(h["default"].createElement("li",{className:s+"-search "+s+"-search--inline",key:"__input"},this.getInputElement())),d=w.isMultipleOrTags(a)&&l?h["default"].createElement(O["default"],{onLeave:this.onChoiceAnimationLeave,component:"ul",transitionName:l},b):h["default"].createElement("ul",null,b)}return h["default"].createElement("div",{className:p,ref:function(t){return e.topCtrlNode=t}},this.getPlaceholderElement(),d)},render:function(){var e,t=this.props,n=w.isMultipleOrTags(t),i=this.state,o=t.className,a=t.disabled,l=t.allowClear,s=t.prefixCls,r=this.renderTopControlNode(),p={},d=this.state.open,f=this._options;w.isMultipleOrTagsOrCombobox(t)||(p={onKeyDown:this.onKeyDown,tabIndex:0});var m=(e={},u["default"](e,o,!!o),u["default"](e,s,1),u["default"](e,s+"-open",d),u["default"](e,s+"-focused",d||!!this._focused),u["default"](e,s+"-combobox",w.isCombobox(t)),u["default"](e,s+"-disabled",a),u["default"](e,s+"-enabled",!a),u["default"](e,s+"-allow-clear",!!t.allowClear),e),v=c["default"]({},w.UNSELECTABLE_STYLE,{display:"none"});(i.inputValue||i.value.length)&&(v.display="block");var g=h["default"].createElement("span",c["default"]({key:"clear",onMouseDown:w.preventDefaultEvent,style:v},w.UNSELECTABLE_ATTRIBUTE,{className:s+"-selection__clear",onClick:this.onClearSelection}));return h["default"].createElement(N["default"],{onPopupFocus:this.onPopupFocus,dropdownAlign:t.dropdownAlign,dropdownClassName:t.dropdownClassName,dropdownMatchSelectWidth:t.dropdownMatchSelectWidth,defaultActiveFirstOption:t.defaultActiveFirstOption,dropdownMenuStyle:t.dropdownMenuStyle,transitionName:t.transitionName,animation:t.animation,prefixCls:t.prefixCls,dropdownStyle:t.dropdownStyle,combobox:t.combobox,showSearch:t.showSearch,options:f,multiple:n,disabled:a,visible:d,inputValue:i.inputValue,value:i.value,onDropdownVisibleChange:this.onDropdownVisibleChange,getPopupContainer:t.getPopupContainer,onMenuSelect:this.onMenuSelect,onMenuDeselect:this.onMenuDeselect,ref:"trigger"},h["default"].createElement("div",{style:t.style,ref:"root",onBlur:this.onOuterBlur,onFocus:this.onOuterFocus,className:T["default"](m)},h["default"].createElement("div",c["default"]({ref:"selection",key:"selection",className:s+"-selection\n            "+s+"-selection--"+(n?"multiple":"single"),role:"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":d},p),r,l?g:null,n||!t.showArrow?null:h["default"].createElement("span",c["default"]({key:"arrow",className:s+"-arrow",style:w.UNSELECTABLE_STYLE},w.UNSELECTABLE_ATTRIBUTE,{onClick:this.onArrowClick}),h["default"].createElement("b",null)))))}});L.displayName="Select",t["default"]=L,n.exports=t["default"]});