define("0547c455aab1eecec7be",function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,n){for(var t=Object.getOwnPropertyNames(n),r=0;r<t.length;r++){var o=t[r],i=Object.getOwnPropertyDescriptor(n,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function l(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):o(e,n))}function f(e){var n=e.children;return d["default"].isValidElement(n)&&!n.key?d["default"].cloneElement(n,{key:g}):n}function p(){}Object.defineProperty(n,"__esModule",{value:!0});var c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u=e("53ab468d896ac9e0f717"),d=r(u),h=e("93140d1a4fe9dea51a2e"),y=r(h),v=e("8a8ccafad0b85060ebc2"),m=e("adcbeb118a6b782d0c21"),b=r(m),E=e("1459d7ae328619a9de6a"),C=r(E),g="rc_animate_"+Date.now(),k=function(e){function n(t){a(this,n);var r=s(this,e.call(this,t));return A.call(r),r.currentlyAnimatingKeys={},r.keysToEnter=[],r.keysToLeave=[],r.state={children:v.toArrayChildren(f(r.props))},r}return l(n,e),n.prototype.componentDidMount=function(){var e=this,n=this.props.showProp,t=this.state.children;n&&(t=t.filter(function(e){return!!e.props[n]})),t.forEach(function(n){n&&e.performAppear(n.key)})},n.prototype.componentWillReceiveProps=function(e){var n=this;this.nextProps=e;var t=v.toArrayChildren(f(e)),r=this.props;r.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach(function(e){n.stop(e)});var o=r.showProp,a=this.currentlyAnimatingKeys,s=r.exclusive?v.toArrayChildren(f(r)):this.state.children,l=[];o?(s.forEach(function(e){var n=e&&v.findChildInChildrenByKey(t,e.key),r=void 0;r=n&&n.props[o]||!e.props[o]?n:d["default"].cloneElement(n||e,i({},o,!0)),r&&l.push(r)}),t.forEach(function(e){e&&v.findChildInChildrenByKey(s,e.key)||l.push(e)})):l=v.mergeChildren(s,t),this.setState({children:l}),t.forEach(function(e){var t=e&&e.key;if(!e||!a[t]){var r=e&&v.findChildInChildrenByKey(s,t);if(o){var i=e.props[o];if(r){var l=v.findShownChildInChildrenByKey(s,t,o);!l&&i&&n.keysToEnter.push(t)}else i&&n.keysToEnter.push(t)}else r||n.keysToEnter.push(t)}}),s.forEach(function(e){var r=e&&e.key;if(!e||!a[r]){var i=e&&v.findChildInChildrenByKey(t,r);if(o){var s=e.props[o];if(i){var l=v.findShownChildInChildrenByKey(t,r,o);!l&&s&&n.keysToLeave.push(r)}else s&&n.keysToLeave.push(r)}else i||n.keysToLeave.push(r)}})},n.prototype.componentDidUpdate=function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var n=this.keysToLeave;this.keysToLeave=[],n.forEach(this.performLeave)},n.prototype.isValidChildByKey=function(e,n){var t=this.props.showProp;return t?v.findShownChildInChildrenByKey(e,n,t):v.findChildInChildrenByKey(e,n)},n.prototype.stop=function(e){delete this.currentlyAnimatingKeys[e];var n=this.refs[e];n&&n.stop()},n.prototype.render=function(){var e=this.props;this.nextProps=e;var n=this.state.children,t=null;n&&(t=n.map(function(n){if(null===n||void 0===n)return n;if(!n.key)throw new Error("must set key for <rc-animate> children");return d["default"].createElement(b["default"],{key:n.key,ref:n.key,animation:e.animation,transitionName:e.transitionName,transitionEnter:e.transitionEnter,transitionAppear:e.transitionAppear,transitionLeave:e.transitionLeave},n)}));var r=e.component;if(r){var o=e;return"string"==typeof r&&(o=c({className:e.className,style:e.style},e.componentProps)),d["default"].createElement(r,o,t)}return t[0]||null},n}(d["default"].Component);k.propTypes={component:y["default"].any,componentProps:y["default"].object,animation:y["default"].object,transitionName:y["default"].oneOfType([y["default"].string,y["default"].object]),transitionEnter:y["default"].bool,transitionAppear:y["default"].bool,exclusive:y["default"].bool,transitionLeave:y["default"].bool,onEnd:y["default"].func,onEnter:y["default"].func,onLeave:y["default"].func,onAppear:y["default"].func,showProp:y["default"].string},k.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:p,onEnter:p,onLeave:p,onAppear:p};var A=function(){var e=this;this.performEnter=function(n){e.refs[n]&&(e.currentlyAnimatingKeys[n]=!0,e.refs[n].componentWillEnter(e.handleDoneAdding.bind(e,n,"enter")))},this.performAppear=function(n){e.refs[n]&&(e.currentlyAnimatingKeys[n]=!0,e.refs[n].componentWillAppear(e.handleDoneAdding.bind(e,n,"appear")))},this.handleDoneAdding=function(n,t){var r=e.props;if(delete e.currentlyAnimatingKeys[n],!r.exclusive||r===e.nextProps){var o=v.toArrayChildren(f(r));e.isValidChildByKey(o,n)?"appear"===t?C["default"].allowAppearCallback(r)&&(r.onAppear(n),r.onEnd(n,!0)):C["default"].allowEnterCallback(r)&&(r.onEnter(n),r.onEnd(n,!0)):e.performLeave(n)}},this.performLeave=function(n){e.refs[n]&&(e.currentlyAnimatingKeys[n]=!0,e.refs[n].componentWillLeave(e.handleDoneLeaving.bind(e,n)))},this.handleDoneLeaving=function(n){var t=e.props;if(delete e.currentlyAnimatingKeys[n],!t.exclusive||t===e.nextProps){var r=v.toArrayChildren(f(t));if(e.isValidChildByKey(r,n))e.performEnter(n);else{var o=function(){C["default"].allowLeaveCallback(t)&&(t.onLeave(n),t.onEnd(n,!1))};v.isSameChildren(e.state.children,r,t.showProp)?o():e.setState({children:r},o)}}}};n["default"]=k,t.exports=n["default"]});