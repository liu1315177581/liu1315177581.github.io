define("cae23fb3da8a06c7e7e5",function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e["default"]=t,e}function i(t,e){for(var o=Object.getOwnPropertyNames(e),r=0;r<o.length;r++){var n=o[r],i=Object.getOwnPropertyDescriptor(e,n);i&&i.configurable&&void 0===t[n]&&Object.defineProperty(t,n,i)}return t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):i(t,e))}function l(){}Object.defineProperty(e,"__esModule",{value:!0});var u=t("53ab468d896ac9e0f717"),d=n(u),p=t("93140d1a4fe9dea51a2e"),f=n(p),h=t("c1ac2a7f260afd4edfd0"),g=t("3c44e58c9248dc4c04a8");t("6df5a3d19c5dbdaa819c");var y=t("7aef28ec8d466e7ee28d"),m=t("74d02db211560ce80d59"),S=r(m),v=t("76d42fbf1e13a5af8ea9"),b=r(v),E=t("45cacbd677e63ef9e76a"),M=r(E),P=t("40c0ac7cc9fed793ad16"),C=r(P),w=void 0||Object.assign||function(t){for(var e,o=1,r=arguments.length;r>o;o++){e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},k=h.KeyBindingUtil.hasCommandModifier,F={},O={width:0,opacity:0,border:0,position:"absolute",left:0,top:0},T=y.createToolbar(),B=new S["default"],D=function(t){function e(o){a(this,e);var r=s(this,t.call(this,o));r.cancelForceUpdateImmediate=function(){clearImmediate(r.forceUpdateImmediate),r.forceUpdateImmediate=null},r.handlePastedText=function(t,e){var o=r.state.editorState;if(e){var n=o.getCurrentContent(),i=o.getSelection(),a=C["default"](e,n),s=h.Modifier.replaceWithFragment(n,i,a),c=s.merge({selectionBefore:i,selectionAfter:s.getSelectionAfter().set("hasFocus",!0)});return r.setEditorState(h.EditorState.push(o,c,"insert-fragment"),!0),"handled"}return"not-handled"},r.plugins=g.List(g.List(o.plugins).flatten(!0));var n=void 0;return n=void 0!==o.value&&o.value instanceof h.EditorState?o.value||h.EditorState.createEmpty():h.EditorState.createEmpty(),n=r.generatorDefaultValue(n),r.state={plugins:r.reloadPlugins(),editorState:n,customStyleMap:{},customBlockStyleMap:{},compositeDecorator:null},void 0!==o.value&&(r.controlledMode=!0,console.warn("this component is in controllred mode")),r}return c(e,t),e.ToEditorState=function(t){var e=h.ContentState.createFromText(E.decodeContent(t)||""),o=h.EditorState.createWithContent(e);return h.EditorState.forceSelection(o,e.getSelectionAfter())},e.prototype.Reset=function(){var t=this.props.defaultValue,e=t?t.getCurrentContent():h.ContentState.createFromText(""),o=h.EditorState.push(this.state.editorState,e,"remove-range");this.setEditorState(h.EditorState.forceSelection(o,e.getSelectionBefore()))},e.prototype.SetText=function(t){var e=h.ContentState.createFromText(t||""),o=h.EditorState.push(this.state.editorState,e,"change-block-data");this.setEditorState(h.EditorState.moveFocusToEnd(o),!0)},e.prototype.getChildContext=function(){return{getEditorState:this.getEditorState,setEditorState:this.setEditorState}},e.prototype.reloadPlugins=function(){var t=this;return this.plugins&&this.plugins.size?this.plugins.map(function(e){if(e.callbacks)return e;if(e.hasOwnProperty("constructor")){var o=Object.assign(t.props.pluginConfig,e.config||{},F);return e.constructor(o)}return console.warn(">> 插件: [",e.name,"] 无效。插件或许已经过期。"),!1}).filter(function(t){return t}).toArray():[]},e.prototype.componentWillMount=function(){var t=this.initPlugins().concat([T]),e={},o={},r=g.Map(h.DefaultDraftBlockRenderMap),n=g.List([]),i=new h.CompositeDecorator(t.filter(function(t){return void 0!==t.decorators}).map(function(t){return t.decorators}).reduce(function(t,e){return t.concat(e)},[])),a=g.List(t.filter(function(t){return!!t.component&&"toolbar"!==t.name}));t.forEach(function(t){var i=t.styleMap,a=t.blockStyleMap,s=t.blockRenderMap,c=t.toHtml;if(i)for(var l in i)i.hasOwnProperty(l)&&(e[l]=i[l]);if(a)for(var u in a)a.hasOwnProperty(u)&&(o[u]=a[u],r=r.set(u,{element:null}));if(c&&(n=n.push(c)),s)for(var d in s)s.hasOwnProperty(d)&&(r=r.set(d,s[d]))}),B.set("customStyleMap",e),B.set("customBlockStyleMap",o),B.set("blockRenderMap",r),B.set("customStyleFn",this.customStyleFn.bind(this)),B.set("toHTMLList",n),this.setState({toolbarPlugins:a,compositeDecorator:i}),this.setEditorState(h.EditorState.set(this.state.editorState,{decorator:i}))},e.prototype.componentWillReceiveProps=function(t){if(this.forceUpdateImmediate&&this.cancelForceUpdateImmediate(),this.controlledMode){var e=t.value.getDecorator(),o=e?t.value:h.EditorState.set(t.value,{decorator:this.state.compositeDecorator});this.setState({editorState:o})}},e.prototype.componentWillUnmount=function(){this.cancelForceUpdateImmediate()},e.prototype.generatorDefaultValue=function(t){var e=this.props.defaultValue;return e?e:t},e.prototype.getStyleMap=function(){return B.get("customStyleMap")},e.prototype.setStyleMap=function(t){B.set("customStyleMap",t),this.render()},e.prototype.initPlugins=function(){var t=this,e=["focus","getEditorState","setEditorState","getStyleMap","setStyleMap"];return this.getPlugins().map(function(o){return e.forEach(function(e){o.callbacks.hasOwnProperty(e)&&(o.callbacks[e]=t[e].bind(t))}),o})},e.prototype.focusEditor=function(t){this.refs.editor.focus(t),this.props.readOnly&&this._focusDummy.focus(),this.props.onFocus&&this.props.onFocus(t)},e.prototype.focus=function(t){var e=this,o=t.target;if(o===this._editorWrapper){var r=this.state.editorState,n=r.getSelection();if(!n.getHasFocus()&&n.isCollapsed())return this.setState({editorState:h.EditorState.moveFocusToEnd(r)},function(){e.focusEditor(t)})}this.focusEditor(t)},e.prototype.getPlugins=function(){return this.state.plugins.slice()},e.prototype.getEventHandler=function(){var t=this,e=["onUpArrow","onDownArrow","handleReturn","onFocus","onBlur","onTab","handlePastedText"],o={};return e.forEach(function(e){o[e]=t.generatorEventHandler(e)}),o},e.prototype.getEditorState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;return t&&this.refs.editor.focus(),this.state.editorState},e.prototype.setEditorState=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,r=t;this.getPlugins().forEach(function(t){if(t.onChange){var e=t.onChange(r);e&&(r=e)}}),this.props.onChange&&(this.props.onChange(r),this.controlledMode&&(this.forceUpdateImmediate=setImmediate(function(){return e.setState({editorState:new h.EditorState(e.state.editorState.getImmutable())})}))),this.controlledMode||this.setState({editorState:r},o?function(){return setImmediate(function(){return e.refs.editor.focus()})}:l)},e.prototype.handleKeyBinding=function(t){if(this.props.onKeyDown){t.ctrlKey=k(t);var e=this.props.onKeyDown(t);return e?e:h.getDefaultKeyBinding(t)}return h.getDefaultKeyBinding(t)},e.prototype.handleKeyCommand=function(t){return this.props.multiLines?this.eventHandle("handleKeyBinding",t):"split-block"===t?"handled":"not-handled"},e.prototype.getBlockStyle=function(t){var e=B.get("customBlockStyleMap"),o=t.getType();return e.hasOwnProperty(o)?e[o]:void 0},e.prototype.blockRendererFn=function(t){var e=null;return this.getPlugins().forEach(function(o){if(o.blockRendererFn){var r=o.blockRendererFn(t);r&&(e=r)}}),e},e.prototype.eventHandle=function(t){for(var e,o=this.getPlugins(),r=arguments.length,n=Array(r>1?r-1:0),i=1;r>i;i++)n[i-1]=arguments[i];for(var a=0;a<o.length;a++){var s=o[a];if(s.callbacks[t]&&"function"==typeof s.callbacks[t]){var c,l=(c=s.callbacks)[t].apply(c,n);if(l===!0)return"handled"}}return this.props.hasOwnProperty(t)&&(e=this.props)[t].apply(e,n)===!0?"handled":"not-handled"},e.prototype.generatorEventHandler=function(t){var e=this;return function(){for(var o=arguments.length,r=Array(o),n=0;o>n;n++)r[n]=arguments[n];return e.eventHandle.apply(e,[t].concat(r))}},e.prototype.customStyleFn=function(t){if(0===t.size)return{};for(var e=this.getPlugins(),o={},r=0;r<e.length;r++)if(e[r].customStyleFn){var n=e[r].customStyleFn(t);n&&Object.assign(o,n)}return o},e.prototype.render=function(){var t=this,e=this.props,o=e.prefixCls,r=e.toolbars,n=e.style,i=e.readOnly,a=this.state,s=a.editorState,c=a.toolbarPlugins,l=B.get("customStyleMap"),u=B.get("blockRenderMap"),p=this.getEventHandler(),f=T.component;return d.createElement("div",{style:n,className:o+"-editor "+(i?"readonly":""),onClick:this.focus.bind(this)},d.createElement(f,{editorState:s,prefixCls:o,className:o+"-toolbar",plugins:c,toolbars:r}),d.createElement("div",{className:o+"-editor-wrapper",ref:function(e){return t._editorWrapper=e},style:n,onClick:function(t){return t.preventDefault()}},d.createElement(h.Editor,w({},this.props,p,{ref:"editor",customStyleMap:l,customStyleFn:this.customStyleFn.bind(this),editorState:s,handleKeyCommand:this.handleKeyCommand.bind(this),keyBindingFn:this.handleKeyBinding.bind(this),onChange:this.setEditorState.bind(this),blockStyleFn:this.getBlockStyle.bind(this),blockRenderMap:u,handlePastedText:this.handlePastedText,blockRendererFn:this.blockRendererFn.bind(this)})),i?d.createElement("input",{style:O,ref:function(e){return t._focusDummy=e},onBlur:p.onBlur}):null,this.props.children))},e}(d.Component);D.GetText=M["default"],D.GetHTML=b["default"](B),D.defaultProps={multiLines:!0,plugins:[],prefixCls:"rc-editor-core",pluginConfig:{},toolbars:[],spilitLine:"enter"},D.childContextTypes={getEditorState:f.func,setEditorState:f.func},e["default"]=D,o.exports=e["default"]});